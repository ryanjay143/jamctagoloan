import{r,j as e,F as m,i as Ce,k as Se,l as ve,m as Ae,n as Te,o as Fe,I as N,B as L,p as P}from"./index-CI8w01h6.js";import{g as x,h as o,a as h,i as j,C as Le,T as f,b,c,d as n,e as p,f as a}from"./card-BvkJ29nE.js";import{a as q}from"./axios-nsdmaO_9.js";import{A as g,a as y,b as w}from"./avatar-C0Y2hrS-.js";import{L as Pe,y as z}from"./index-DGqMnfrv.js";import"./index-DQpn0aax.js";function Ie(){const[J,O]=r.useState(0),[V,W]=r.useState(0),[Y,Z]=r.useState(0),[_,ee]=r.useState(0),[se,te]=r.useState(0),[ae,re]=r.useState(0),[$,Q]=r.useState([]),[K,ne]=r.useState([]),[E,le]=r.useState([]),[R,de]=r.useState([]),[H,ce]=r.useState([]),[C,ie]=r.useState(""),[I,B]=r.useState([]),[T,me]=r.useState(""),[k,xe]=r.useState([]),[S,oe]=r.useState(""),[D,he]=r.useState([]),[v,je]=r.useState(""),[M,ue]=r.useState([]),[A,Ne]=r.useState(""),[U,fe]=r.useState([]),G=async()=>{try{const s=await q.get("list-of-member",{headers:{"Content-Type":"application/json"}});O(s.data.attendanceTodayCount||0),W(s.data.absentTodayCount||0),Z(s.data.firstTimerCount||0),ee(s.data.attendedLastSundayCount||0),te(s.data.kidsAttendedTodayCount||0),re(s.data.adultAttendedTodayCount||0),Q(s.data.attendanceToday||[]),ne(s.data.firstTimer||[]),le(s.data.absentToday||[]),de(s.data.attendedLastSunday||[]),ce(s.data.kidsAttendedToday||[])}catch(s){console.error("Error fetching members:",s)}},F=async(s,t,i)=>{try{await q.delete(`list-of-member/${s}`),i==="today"&&(Q(l=>l.filter(d=>d.id!==s)),B(l=>l.filter(d=>d.id!==s))),z.success(`Attendance for ${t} deleted successfully!`),G()}catch(l){console.error("Error deleting attendance:",l),z.error("Failed to delete attendance. Please try again.")}};r.useEffect(()=>{G()},[]),r.useEffect(()=>{be(),pe(),ge(),ye(),we()},[C,$,T,K,S,E,v,R,A,H]);const be=()=>{const s=$.filter(t=>t.member&&(t.member.name.toLowerCase().includes(C.toLowerCase())||t.member.role.toLowerCase().includes(C.toLowerCase())));B(s)},pe=()=>{const s=K.filter(t=>t.name&&t.name.toLowerCase().includes(T.toLowerCase()));xe(s)},ge=()=>{const s=E.filter(t=>t.member&&(t.member.name.toLowerCase().includes(S.toLowerCase())||t.member.role.toLowerCase().includes(S.toLowerCase())));he(s)},ye=()=>{const s=R.filter(t=>t.member&&(t.member.name.toLowerCase().includes(v.toLowerCase())||t.member.role.toLowerCase().includes(v.toLowerCase())));ue(s)},we=()=>{const s=H.filter(t=>t.member&&(t.member.name.toLowerCase().includes(A.toLowerCase())||t.member.role.toLowerCase().includes(A.toLowerCase())));fe(s)};return e.jsxs("div",{className:"ml-56 mx-auto md:ml-0 md:w-full",children:[e.jsx(Pe,{}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:e.jsx("div",{className:"col-span-3",children:e.jsxs("div",{className:"rounded-md min-h-80 p-2 pl-2 md:pl-0",children:[e.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-2 gap-4 p-5",children:[e.jsx("div",{children:e.jsx(x,{className:"max-h-32 border border-b-4 border-primary shadow-md",children:e.jsxs(o,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-3xl font-bold text-green-500 animate-bounce",children:J}),e.jsx(m,{icon:Ce,className:"ml-2 h-10 text-green-100"})]}),e.jsx(j,{className:"font-bold text-green-500 md:text-xs",children:"Total Present Today"})]})})}),e.jsx("div",{children:e.jsx(x,{className:"max-h-32 border border-b-4 border-primary shadow-md",children:e.jsxs(o,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-3xl font-bold text-blue-500 animate-bounce",children:se}),e.jsx(m,{icon:Se,className:"ml-2 h-10 text-blue-100"})]}),e.jsx(j,{className:"font-bold text-blue-500 md:text-xs",children:"Kids Attended Today"})]})})}),e.jsx("div",{children:e.jsx(x,{className:"max-h-32 border border-b-4 border-primary shadow-md",children:e.jsxs(o,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-3xl font-bold text-orange-500 animate-bounce",children:ae}),e.jsx(m,{icon:ve,className:"ml-2 h-10 text-orange-100"})]}),e.jsx(j,{className:"font-bold text-orange-500 md:text-xs",children:"Adults Attended Today"})]})})}),e.jsx("div",{children:e.jsx(x,{className:"max-h-32 border border-b-4 border-primary shadow-md",children:e.jsxs(o,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-3xl font-bold text-pink-500 animate-bounce",children:_}),e.jsx(m,{icon:Ae,className:"ml-2 h-10 text-pink-100"})]}),e.jsx(j,{className:"font-bold text-pink-500 md:text-xs",children:"Attended Last Sunday"})]})})}),e.jsx("div",{children:e.jsx(x,{className:"max-h-32 border border-b-4 border-primary shadow-md",children:e.jsxs(o,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-3xl font-bold text-yellow-500 animate-bounce",children:Y}),e.jsx(m,{icon:Te,className:"ml-2 h-10 text-yellow-100"})]}),e.jsx(j,{className:"font-bold text-yellow-500 md:text-xs",children:"First Timer"})]})})}),e.jsx("div",{children:e.jsx(x,{className:"max-h-32 border border-b-4 border-primary shadow-md",children:e.jsxs(o,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-3xl font-bold text-red-500 animate-bounce",children:V}),e.jsx(m,{icon:Fe,className:"ml-2 h-10 text-red-100"})]}),e.jsx(j,{className:"font-bold text-red-500 md:text-xs",children:"Total Today's Absent"})]})})})]}),e.jsx(Le,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-1 gap-10",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"py-2 flex flex-row justify-between",children:[e.jsx("label",{htmlFor:"",className:"md:text-base",children:"Present today"}),e.jsx(N,{type:"text",placeholder:"Search",className:"w-52",value:C,onChange:s=>ie(s.target.value)})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(f,{className:"w-full",children:[e.jsx(b,{children:e.jsxs(c,{children:[e.jsx(n,{className:"text-center md:text-xs",children:"Photo"}),e.jsx(n,{className:"md:text-xs",children:"Full Name"}),e.jsx(n,{className:"md:text-xs",children:"Role"}),e.jsx(n,{className:"md:text-xs",children:"Status"}),e.jsx(n,{className:"md:text-xs",children:"Action"})]})}),e.jsx(p,{children:I.length>0?I.map(s=>{var t,i,l,d;return e.jsxs(c,{children:[e.jsx(a,{className:"flex justify-center items-center md:text-xs",children:(t=s.member)!=null&&t.photo?e.jsx("img",{src:`undefined/storage/${s==null?void 0:s.member.photo}`,alt:s.member.name,className:"rounded-full h-10"}):e.jsxs(g,{children:[e.jsx(y,{src:"https://github.com/shadcn.png"}),e.jsx(w,{children:(i=s.member)==null?void 0:i.name})]})}),e.jsx(a,{className:"md:text-xs",children:(l=s.member)==null?void 0:l.name}),e.jsx(a,{className:"md:text-xs",children:(d=s.member)==null?void 0:d.role}),e.jsx(a,{className:"md:text-xs",children:s.status===0?e.jsx("span",{className:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-green-600/20 ring-inset",children:"Present"}):e.jsx("span",{children:s.status})}),e.jsx(a,{className:"md:text-xs",children:e.jsx(L,{className:"bg-red-500 hover:bg-red-300 ml-4 md:ml-2 h-7 w-5",onClick:()=>{var u;return F(s.id,(u=s.member)==null?void 0:u.name,"today")},children:e.jsx(m,{icon:P})})})]},s.id)}):e.jsx(c,{children:e.jsx(a,{colSpan:5,className:"text-center py-4",children:"No record found"})})})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"py-2 flex flex-row justify-between",children:[e.jsx("label",{htmlFor:"",children:"First Timer"}),e.jsx(N,{type:"text",placeholder:"Search",className:"w-52",value:T,onChange:s=>me(s.target.value)})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(f,{className:"w-full",children:[e.jsx(b,{children:e.jsxs(c,{children:[e.jsx(n,{className:"text-center md:text-xs",children:"Photo"}),e.jsx(n,{className:"md:text-xs",children:"Full Name"}),e.jsx(n,{className:"md:text-xs",children:"Status"})]})}),e.jsx(p,{children:k.length>0?k.map(s=>e.jsxs(c,{children:[e.jsx(a,{className:"flex justify-center items-center md:text-xs",children:s.photo?e.jsx("img",{src:`undefined/storage/${s==null?void 0:s.photo}`,alt:s.name,className:"rounded-full h-10"}):e.jsxs(g,{children:[e.jsx(y,{src:"https://github.com/shadcn.png"}),e.jsx(w,{children:"CN"})]})}),e.jsx(a,{className:"md:text-xs",children:s.name}),e.jsx(a,{className:"md:text-xs",children:e.jsx("span",{className:"inline-flex items-center rounded-md bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-800 ring-1 ring-yellow-600/20 ring-inset",children:s.role})})]},s.id)):e.jsx(c,{children:e.jsx(a,{colSpan:5,className:"text-center py-4",children:"No record found"})})})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"py-2 flex flex-row justify-between",children:[e.jsx("label",{htmlFor:"",children:"Absent today"}),e.jsx(N,{type:"text",placeholder:"Search",className:"w-52",value:S,onChange:s=>oe(s.target.value)})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(f,{className:"w-full",children:[e.jsx(b,{children:e.jsxs(c,{children:[e.jsx(n,{className:"text-center md:text-xs",children:"Photo"}),e.jsx(n,{className:"md:text-xs",children:"Full Name"}),e.jsx(n,{className:"md:text-xs",children:"Role"}),e.jsx(n,{className:"md:text-xs",children:"Status"}),e.jsx(n,{className:"md:text-xs",children:"Action"})]})}),e.jsx(p,{children:D.length>0?D.map(s=>{var t,i,l;return e.jsxs(c,{children:[e.jsx(a,{className:"flex justify-center items-center md:text-xs",children:(t=s.member)!=null&&t.photo?e.jsx("img",{src:`undefined/storage/${s==null?void 0:s.member.photo}`,alt:s.member.name,className:"rounded-full h-10"}):e.jsxs(g,{children:[e.jsx(y,{src:"https://github.com/shadcn.png"}),e.jsx(w,{children:"CN"})]})}),e.jsx(a,{className:"md:text-xs",children:(i=s.member)==null?void 0:i.name}),e.jsx(a,{className:"md:text-xs",children:(l=s.member)==null?void 0:l.role}),e.jsx(a,{children:s.status===1?e.jsx("span",{className:"inline-flex items-center rounded-md bg-red-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-red-600/10 ring-inset",children:"Absent"}):e.jsx("span",{children:s.status})}),e.jsx(a,{className:"md:text-xs",children:e.jsx(L,{className:"bg-red-500 hover:bg-red-300 ml-4 md:ml-2 h-7 w-5",onClick:()=>{var d;return F(s.id,(d=s.member)==null?void 0:d.name,"today")},children:e.jsx(m,{icon:P})})})]},s.id)}):e.jsx(c,{children:e.jsx(a,{colSpan:5,className:"text-center py-4",children:"No record found"})})})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"py-2 flex flex-row justify-between",children:[e.jsx("label",{htmlFor:"",className:"md:text-sm",children:"Attended Last Sunday"}),e.jsx(N,{type:"text",placeholder:"Search",className:"w-52",value:v,onChange:s=>je(s.target.value)})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(f,{className:"w-full",children:[e.jsx(b,{children:e.jsxs(c,{children:[e.jsx(n,{className:"text-center md:text-xs",children:"#"}),e.jsx(n,{className:"text-center md:text-xs",children:"Photo"}),e.jsx(n,{className:"md:text-xs",children:"Full Name"}),e.jsx(n,{className:"md:text-xs",children:"Role"}),e.jsx(n,{className:"md:text-xs",children:"Status"})]})}),e.jsx(p,{children:M.length>0?M.map((s,t)=>{var i,l,d;return e.jsxs(c,{children:[e.jsx(a,{className:"md:text-xs",children:t+1}),e.jsx(a,{className:"flex justify-center items-center md:text-xs",children:(i=s.member)!=null&&i.photo?e.jsx("img",{src:`undefined/storage/${s==null?void 0:s.member.photo}`,alt:s.member.name,className:"rounded-full h-10"}):e.jsxs(g,{children:[e.jsx(y,{src:"https://github.com/shadcn.png"}),e.jsx(w,{children:"CN"})]})}),e.jsx(a,{className:"md:text-xs",children:(l=s.member)==null?void 0:l.name}),e.jsx(a,{className:"md:text-xs",children:(d=s.member)==null?void 0:d.role}),e.jsx(a,{className:"md:text-xs",children:s.status===1?e.jsx("span",{className:"inline-flex items-center rounded-md bg-red-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-red-600/10 ring-inset",children:"Absent"}):s.status===0?e.jsx("span",{className:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-green-600/20 ring-inset",children:"Present"}):e.jsx("span",{children:s.status})})]},s.id)}):e.jsx(c,{children:e.jsx(a,{colSpan:5,className:"text-center py-4",children:"No record found"})})})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"py-2 flex flex-row justify-between",children:[e.jsx("label",{htmlFor:"",children:"Kids Attended Today"}),e.jsx(N,{type:"text",placeholder:"Search",className:"w-52",value:A,onChange:s=>Ne(s.target.value)})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(f,{className:"w-full",children:[e.jsx(b,{children:e.jsxs(c,{children:[e.jsx(n,{className:"text-center md:text-xs",children:"Photo"}),e.jsx(n,{className:"md:text-xs",children:"Full Name"}),e.jsx(n,{className:"md:text-xs",children:"Role/Ministry"}),e.jsx(n,{className:"md:text-xs",children:"Status"}),e.jsx(n,{className:"md:text-xs",children:"Action"})]})}),e.jsx(p,{children:U.length>0?U.map(s=>{var t,i,l,d,u;return e.jsxs(c,{children:[e.jsx(a,{className:"flex justify-center items-center md:text-xs",children:(t=s.member)!=null&&t.photo?e.jsx("img",{src:`undefined/storage/${(i=s.member)==null?void 0:i.photo}`,alt:(l=s.member)==null?void 0:l.name,className:"rounded-full h-10"}):e.jsxs(g,{children:[e.jsx(y,{src:"https://github.com/shadcn.png"}),e.jsx(w,{children:"CN"})]})}),e.jsx(a,{className:"md:text-xs",children:(d=s.member)==null?void 0:d.name}),e.jsx(a,{className:"md:text-xs",children:e.jsx("span",{className:"inline-flex items-center rounded-md bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-800 ring-1 ring-yellow-600/20 ring-inset",children:(u=s.member)==null?void 0:u.role})}),e.jsx(a,{className:"md:text-xs",children:s.status===1?e.jsx("span",{className:"inline-flex items-center rounded-md bg-red-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-red-600/10 ring-inset",children:"Absent"}):s.status===0?e.jsx("span",{className:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-green-600/20 ring-inset",children:"Present"}):e.jsx("span",{children:s.status})}),e.jsx(a,{className:"md:text-xs",children:e.jsx(L,{className:"bg-red-500 hover:bg-red-300 ml-4 md:ml-2 h-7 w-5",onClick:()=>{var X;return F(s.id,(X=s.member)==null?void 0:X.name,"today")},children:e.jsx(m,{icon:P})})})]},s.id)}):e.jsx(c,{children:e.jsx(a,{colSpan:5,className:"text-center py-4",children:"No record found"})})})]})})]})]})})]})})})]})}export{Ie as default};
